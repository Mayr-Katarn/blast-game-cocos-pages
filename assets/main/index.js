System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./BlockType.ts","./BusterType.ts","./Cell.ts"],(function(t){"use strict";var e,o,i,n,s,r,l,c,a,h,u,_,d,C,m,p,b,f,v,y,B,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,i=t.inheritsLoose,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.SpriteFrame,c=t.Sprite,a=t.Node,h=t.Animation,u=t.math,_=t.Color,d=t.Vec3,C=t.BoxCollider2D,m=t.Contact2DType,p=t.tween,b=t.Component},function(t){f=t.gameEventTarget,v=t.GameEvent},function(t){y=t.default},function(t){B=t.default},function(t){k=t.default}],execute:function(){var T,E,N,g,w,S,D,L,A,I,M,O,R,z,G,F,P,x,Y,H;s._RF.push({},"d58f5N821FGqa1kYeYk31mJ","Block",void 0);var K,V=r.ccclass,U=r.property,Z=r.menu,j=r.executeInEditMode;!function(t){t.Destroy="block-destruction",t.Pulse="block-pulse"}(K||(K={}));var q=(T=V("BlockColor"),E=U({type:l}),N=U({type:y}),T((S=e((w=function(){o(this,"blockSprite",S,this),o(this,"color",D,this)}).prototype,"blockSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(w.prototype,"color",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Blue}}),g=w))||g);t("default",(L=V("Block"),A=Z("GameObjects/GameField/Block"),I=j(!0),M=U({type:c}),O=U({type:a}),R=U({type:[q]}),L(z=A(z=I((F=e((G=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"renderSprite",F,n(e)),o(e,"crossColliderNode",P,n(e)),o(e,"initMoveTweenDuration",x,n(e)),o(e,"moveToBotCellTweenDuration",Y,n(e)),o(e,"blockColors",H,n(e)),e.blockType=void 0,e.row=void 0,e.col=void 0,e.isDestroyed=!1,e.isMoving=!1,e._collider=void 0,e._animation=void 0,e._maxActiveColors=2,e._initScale=void 0,e._sameColorNearbyBlocks=[],e._bottomCell=void 0,e._isFirstInit=!0,e._activeBuster=B.None,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this._initCollider(),this._animation=this.getComponent(h),this._eventListener(!0)},s.onDisable=function(){this._eventListener(!1)},s.update=function(){this._checkBottomCell()},s.init=function(t,e,o,i,n,s){this._maxActiveColors=n>this.blockColors.length?this.blockColors.length:n,this.row=o,this.col=i,this._sameColorNearbyBlocks=[],this.isDestroyed=!1,this._bottomCell=null,this._setInitScale(),this.node.setSiblingIndex(s-1),this.setNewColor().setLocalPosition(t),this._moveTween(e),this._isFirstInit=!1},s.setNewColor=function(){var t=u.randomRangeInt(0,this._maxActiveColors),e=this.blockColors[t];return this.renderSprite.grayscale=!1,this.renderSprite.color=_.WHITE,this.renderSprite.node.setScale(d.ONE),this.renderSprite.spriteFrame=e.blockSprite,this.blockType=e.color,this},s.setLocalPosition=function(t){return this.node.position=t,this.crossColliderNode.position=d.ZERO,this},s.destroyBlock=function(t,e){void 0===t&&(t=this),void 0===e&&(e=!1),this.isDestroyed=!0,e||(f.emit(v.SET_BLOCK_IN_CHAIN,t,this),this._sameColorNearbyBlocks.forEach((function(e){return!e.isDestroyed&&e.destroyBlock(t)})),this._sameColorNearbyBlocks=[]),this._animation.play(K.Destroy)},s._eventListener=function(t){var e=t?"on":"off";f[e](v.BLOCK_RESET_COLOR,this.onResetColor,this),f[e](v.BLOCK_TOGGLE_ACTIVE_BUSTER,this.onToogleActiveBuster,this)},s._initCollider=function(){this._collider=this.crossColliderNode.getComponent(C),this._collider.on(m.BEGIN_CONTACT,this.onBeginContact,this),this._collider.on(m.END_CONTACT,this.onEndContact,this),this._collider.enabled=!1},s._setInitScale=function(){var t=this.node.scale,e=t.x,o=t.y,i=t.z;this._initScale=new d(e,o,i)},s._checkBottomCell=function(){this._isBottomCellEmpty()&&this._moveToBotCell()},s._isBottomCellEmpty=function(){var t;return!this.isDestroyed&&!this.isMoving&&(null==(t=this._bottomCell)?void 0:t.isEmpty)},s._moveToBotCell=function(){this._moveTween(this._bottomCell.node.position),f.emit(v.SET_CELL_EMPTY,!0,this.row,this.col),f.emit(v.SET_CELL_EMPTY,!1,this.row-1,this.col),this.row=this._bottomCell.row,this._bottomCell=null,this._sameColorNearbyBlocks=[]},s._moveTween=function(t){var e=this;this.isMoving=!0,this._collider.enabled=!1,this.crossColliderNode.position=d.ZERO;var o=this._isFirstInit?this.initMoveTweenDuration:this.moveToBotCellTweenDuration,i={onComplete:function(){e.isMoving=!1,e.crossColliderNode.position=d.ZERO,e._collider.enabled=!0}};p(this.node).to(o,{position:t},i).start()},s._resetColor=function(){this.setNewColor(),this._resetSameColorNearbyBlocks()},s._resetSameColorNearbyBlocks=function(){this._collider.enabled=!1,this._sameColorNearbyBlocks=[],this._collider.enabled=!0},s._setNearbyBlock=function(t){t.blockType===this.blockType&&this._sameColorNearbyBlocks.push(t)},s._updateNearbyBlocks=function(){this._sameColorNearbyBlocks=this._sameColorNearbyBlocks.filter((function(t){return!t.isDestroyed&&!t.isMoving}))},s._checkSameColorNearbyBlocks=function(){var t=0===this._sameColorNearbyBlocks.length;f.emit(v.SET_CELL_MATCH,t,this.row,this.col)},s._toggleActiveBuster=function(t){switch(this._activeBuster=this._activeBuster===t?B.None:t,this._animation.stop(),this.node.setScale(this._initScale),this._activeBuster){case B.Bomb:this._animation.play(K.Pulse)}},s._isActiveBuster=function(){switch(this._activeBuster){case B.Bomb:return f.emit(v.BLOCK_TOGGLE_ACTIVE_BUSTER,B.None),f.emit(v.BUSTER_ACTIVATE,B.Bomb,this),!0;default:return!1}},s.onClick=function(){this._isActiveBuster()||0!==this._sameColorNearbyBlocks.length&&this.destroyBlock()},s.onBeginContact=function(t,o,i){var n=o.node.parent.getComponent(e);if(n&&this._setNearbyBlock(n),this._checkSameColorNearbyBlocks(),0!==this.row){var s=o.node.getComponent(k);(null==s?void 0:s.row)===this.row-1&&(this._bottomCell=s)}},s.onEndContact=function(t,e,o){this.isDestroyed||this.isMoving||(this._updateNearbyBlocks(),this._checkSameColorNearbyBlocks())},s.onDestructionAnimationEnd=function(){f.emit(v.SET_CELL_EMPTY,!0,this.row,this.col),this.node.active=!1},s.onResetColor=function(){this._resetColor()},s.onToogleActiveBuster=function(t){this._toggleActiveBuster(t)},e}(b)).prototype,"renderSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(G.prototype,"crossColliderNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(G.prototype,"initMoveTweenDuration",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Y=e(G.prototype,"moveToBotCellTweenDuration",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),H=e(G.prototype,"blockColors",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=G))||z)||z)||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlockType.ts",["cc"],(function(e){"use strict";var c,t;return{setters:[function(e){c=e.Enum,t=e.cclegacy}],execute:function(){t._RF.push({},"cafccZEicZCGKB0mxdzmAOz","BlockType",void 0);e("default",c({Red:0,Blue:1,Yellow:2,Green:3,Purple:4}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BombBuster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./Block.ts"],(function(e){"use strict";var t,i,o,n,r,l,s,a,c,u,d,h,p,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,a=e.PolygonCollider2D,c=e.Contact2DType,u=e.Vec3,d=e.tween,h=e.Component},function(e){p=e.gameEventTarget,f=e.GameEvent},function(e){v=e.default}],execute:function(){var B,b,_,m,y,g,C,D;r._RF.push({},"bb09cXulhNCX6xmfx/IuWCj","BombBuster",void 0);var N=l.ccclass,w=l.property,T=l.menu;e("default",(B=N("BombBuster"),b=T("GameObjects/Busters/BombBuster"),_=w({type:s}),B(m=b((g=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"colliderNode",g,n(t)),o(t,"radius",C,n(t)),o(t,"activationTweenDuration",D,n(t)),t._collider=void 0,t._hitedBlocks=[],t}i(t,e);var r=t.prototype;return r.init=function(e){this.node.setWorldPosition(e),this._initCollider(),this._activateBuster()},r._initCollider=function(){this._collider=this.colliderNode.getComponent(a),this._collider.on(c.BEGIN_CONTACT,this.onBeginContact,this),this._collider.enabled=!1},r._activateBuster=function(){var e=this;this.colliderNode.position=u.ZERO,this.colliderNode.setScale(u.ONE),this._collider.enabled=!0;var t=new u(this.radius,this.radius,1),i={onComplete:function(){e._collider.enabled=!1;var t=e._hitedBlocks[0].node.worldPosition;p.emit(f.ADD_SCORE,t,e._hitedBlocks.length),e.node.destroy()}};d(this.colliderNode).to(this.activationTweenDuration,{scale:t},i).start()},r.onBeginContact=function(e,t,i){var o=t.node.parent.getComponent(v);o.isDestroyed||o.isMoving||(o.destroyBlock(o,!0),this._hitedBlocks.push(o))},t}(h)).prototype,"colliderNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"radius",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),D=t(y.prototype,"activationTweenDuration",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),m=y))||m)||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/BusterButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./BusterType.ts"],(function(t){"use strict";var e,n,r,i,o,u,s,a,l,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,s=t.Label,a=t.Component},function(t){l=t.gameEventTarget,c=t.GameEvent},function(t){p=t.default}],execute:function(){var f,y,B,b,h,v;o._RF.push({},"4c3eaGJp4tBKYQi9Jncff2s","BusterButton",void 0);var _=u.ccclass,T=u.property,g=u.menu;t("default",(f=_("BusterButton"),y=g("Ui/Buttons/BusterButton"),B=T({type:s}),f(b=y((v=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,r(e,"label",v,i(e)),e._busterType=p.None,e}n(e,t);var o=e.prototype;return o.init=function(t,e,n){this._busterType=t,this.label.string=e,this.label.fontSize=n},o.onClick=function(){l.emit(c.BLOCK_TOGGLE_ACTIVE_BUSTER,this._busterType)},e}(a)).prototype,"label",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/BustersBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BusterType.ts","./BusterButton.ts"],(function(t){"use strict";var e,n,r,i,o,u,a,s,l,b,c,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,r=t.inheritsLoose,i=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,a=t.Prefab,s=t.Node,l=t.Vec3,b=t.instantiate,c=t.Component},function(t){f=t.default},function(t){p=t.default}],execute:function(){var B,y,h,g,w,z,m,v,d,T,P,C,F,_,D,X,x,S;o._RF.push({},"403a5bXnC5DFbyjiTrvqZr9","BustersBar",void 0);var j=u.ccclass,A=u.property,E=u.menu,L=(B=j("BusterButtonAtBar"),y=A({type:f}),h=A({type:a}),B((z=e((w=function(){n(this,"busterType",z,this),n(this,"busterPrefab",m,this),n(this,"labelText",v,this),n(this,"labelFontSize",d,this)}).prototype,"busterType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.None}}),m=e(w.prototype,"busterPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"labelText",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(w.prototype,"labelFontSize",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 18}}),g=w))||g);t("default",(T=j("BustersBar"),P=E("Ui/BustersBar"),C=A({type:s,tooltip:"Родительская нода кнопок"}),F=A({type:[L]}),T(_=P((X=e((D=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,n(e,"buttonsContainer",X,i(e)),n(e,"offsetXBetweenButtons",x,i(e)),n(e,"busterButtons",S,i(e)),e}r(e,t);var o=e.prototype;return o.onEnable=function(){this._createButtons()},o.onDisable=function(){},o._createButtons=function(){var t=this,e=-this.offsetXBetweenButtons*(this.busterButtons.length-1)/2;this.busterButtons.forEach((function(n,r){var i=new l(e+t.offsetXBetweenButtons*r,0,0),o=b(n.busterPrefab);o.setParent(t.buttonsContainer),o.setPosition(i),o.getComponent(p).init(n.busterType,n.labelText,n.labelFontSize)}))},e}(c)).prototype,"buttonsContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"offsetXBetweenButtons",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=e(D.prototype,"busterButtons",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=D))||_)||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/BustersManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./BusterType.ts","./BombBuster.ts"],(function(t){"use strict";var e,n,r,i,o,a,s,u,c,l,f,p,B,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,u=t.Prefab,c=t.instantiate,l=t.Component},function(t){f=t.gameEventTarget,p=t.GameEvent},function(t){B=t.default},function(t){b=t.default}],execute:function(){var v,m,h,_,d,g,y,E;o._RF.push({},"b82476Uz4BER6QHm/Lm9B7n","BustersManager",void 0);var T=a.ccclass,L=a.property,P=a.menu;t("default",(v=T("BustersManager"),m=P("Managers/BustersManager"),h=L({type:s,tooltip:"Корневая родительская нода"}),_=L({type:u}),v(d=m((y=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"rootNode",y,i(e)),r(e,"bombBusterPrefab",E,i(e)),e}n(e,t);var o=e.prototype;return o.onEnable=function(){this._eventListener(!0)},o.onDisable=function(){this._eventListener(!1)},o._eventListener=function(t){f[t?"on":"off"](p.BUSTER_ACTIVATE,this.onActivateBuster,this)},o._activateBuster=function(t,e){switch(t){case B.Bomb:this._activateBombBuster(e.node.worldPosition),f.emit(p.BLOCK_TOGGLE_ACTIVE_BUSTER,B.None,this)}},o._activateBombBuster=function(t){var e=c(this.bombBusterPrefab),n=e.getComponent(b);e.setParent(this.rootNode),n.init(t)},o.onActivateBuster=function(t,e){this._activateBuster(t,e)},e}(l)).prototype,"rootNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(g.prototype,"bombBusterPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/BusterType.ts",["cc"],(function(e){"use strict";var t,u;return{setters:[function(e){t=e.Enum,u=e.cclegacy}],execute:function(){u._RF.push({},"ba524cuLvpF3YO+Br9E//SK","BusterType",void 0);e("default",t({None:0,Bomb:1}));u._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Component}],execute:function(){var c;o._RF.push({},"2f04aNz59tKWKMjzJKS830J","Cell",void 0);var r=n.ccclass,l=n.menu,s=n.executeInEditMode;t("default",r("Cell")(c=l("GameObjects/GameField/Cell")(c=s(!0)(c=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).row=void 0,e.col=void 0,e.isEmpty=!1,e.isNoMatch=!1,e}return e(o,t),o.prototype.init=function(t,e,o){this.node.position=t,this.row=e,this.col=o},o}(i))||c)||c)||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectType.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.Enum,c=e.cclegacy}],execute:function(){c._RF.push({},"71377JAYpZCZ5XJN6z4aTNU","EffectType",void 0);e("default",t({FlyAwayText:0,FullScreenMessage:1}));c._RF.pop()}}}));

System.register("chunks:///_virtual/FlyAwayText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,r,o,a,l,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,s=e.tween,c=e.Component,u=e.Vec3}],execute:function(){var f,y,p,b,w,d,h,T;o._RF.push({},"ac5b9fYVtZNGJOIejUqv8+v","FlyAwayText",void 0);var g=a.ccclass,x=a.property,v=a.menu;e("default",(f=g("FlyAwayText"),y=v("Ui/Effects/FlyAwayText"),p=x({type:l}),f(b=y((d=t((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"textLabel",d,r(t)),i(t,"effectTweenDuration",h,r(t)),i(t,"effectTweenTargetPosition",T,r(t)),t}n(t,e);var o=t.prototype;return o.onEnable=function(){this.textLabel.enabled=!1},o.init=function(e,t){this.node.setWorldPosition(e),this.textLabel.string=t,this._flyAwayText()},o._flyAwayText=function(){var e=this,t=this.effectTweenTargetPosition.add(this.node.worldPosition);this.textLabel.enabled=!0;var n={easing:"quadOut",onComplete:function(){e.node.destroy()}};s(this.node).to(this.effectTweenDuration,{worldPosition:t},n).start()},t}(c)).prototype,"textLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(w.prototype,"effectTweenDuration",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=t(w.prototype,"effectTweenTargetPosition",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),b=w))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/FullScreenMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiEvents.ts"],(function(e){"use strict";var t,i,n,r,s,a,o,l,u,c,g,f,p,b,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Node,l=e.Label,u=e.UIOpacity,c=e.UITransform,g=e.view,f=e.tween,p=e.Vec3,b=e.Component},function(e){h=e.uiEventTarget,m=e.UiEvent}],execute:function(){var d,_,y,T,S,w,v,L,M,F,z,k,E,C,N;s._RF.push({},"33b2fBkbvtAP6gdSmMebmST","FullScreenMessage",void 0);var O=a.ccclass,I=a.property,P=a.menu;e("default",(d=O("FullScreenMessage"),_=P("Ui/FullScreenMessage"),y=I({type:o}),T=I({type:o}),S=I({type:l}),w=I({type:l}),d(v=_((M=t((L=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"backgroundNode",M,r(t)),n(t,"messageContainerNode",F,r(t)),n(t,"messageHeaderLabel",z,r(t)),n(t,"messageTextLabel",k,r(t)),n(t,"showTime",E,r(t)),n(t,"startMessagePosition",C,r(t)),n(t,"lifeTime",N,r(t)),t._uiOpacity=void 0,t._backgroundTransform=void 0,t}i(t,e);var s=t.prototype;return s.onEnable=function(){this._uiOpacity=this.getComponent(u),this._backgroundTransform=this.backgroundNode.getComponent(c),this._eventListener(!0)},s.onDisable=function(){this._eventListener(!1)},s._eventListener=function(e){h[e?"on":"off"](m.SET_FULL_SCREEN_MESSAGE,this.onInitFullScreenMessage,this)},s._initFullScreenMessage=function(e,t,i,n){this.messageHeaderLabel.string=e,this.messageHeaderLabel.color=i,this.messageTextLabel.string=t,this._setBackgroundToFullScreen(),this._startShadingTween(),this._startMessageTween(),this._startLifeTimeScheduler(n)},s._setBackgroundToFullScreen=function(){this._backgroundTransform.setContentSize(g.getVisibleSizeInPixel())},s._startShadingTween=function(){f(this._uiOpacity).to(this.showTime,{opacity:255}).start()},s._startMessageTween=function(){f(this.messageContainerNode).to(this.showTime,{position:p.ZERO}).start()},s._startLifeTimeScheduler=function(e){var t=this;this.scheduleOnce((function(){e&&e(),t._uiOpacity.opacity=0}),this.lifeTime)},s.onInitFullScreenMessage=function(e,t,i,n){this._initFullScreenMessage(e,t,i,n)},t}(b)).prototype,"backgroundNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"messageContainerNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"messageHeaderLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"messageTextLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(L.prototype,"showTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),C=t(L.prototype,"startMessagePosition",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),N=t(L.prototype,"lifeTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=L))||v)||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameAreaCommandType.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.Enum,c=e.cclegacy}],execute:function(){c._RF.push({},"3278dGE3gFMjLvev89DOWWC","GameAreaCommandType",void 0);e("default",t({None:0,Block:1}));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameAreaInputCommand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts","./GameAreaCommandType.ts","./InputDirection.ts","./InputCatcher.ts","./IInputCommand.ts"],(function(n){"use strict";var t,e,o,u,a,c,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.default},function(n){u=n.default},function(n){a=n.default},function(n){c=n.default},function(n){i=n.default}],execute:function(){e._RF.push({},"61fe5h2j2NDSa5L9AaMtjnd","GameAreaInputCommand",void 0);n("default",function(n){function e(t){return n.call(this,t)||this}t(e,n);var i=e.prototype;return i.onDown=function(n,t){var e=t.node.getComponent(c);if((null==e?void 0:e.direction)===a.GameArea)switch(e.gameAreaCommandType){case u.Block:t.node.getComponent(o).onClick()}},i.onMove=function(n,t){},i.onUp=function(n,t){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc"],(function(E){"use strict";var _,T;return{setters:[function(E){_=E.cclegacy,T=E.EventTarget}],execute:function(){E("GameEvent",void 0),_._RF.push({},"c8cafNi22VBsJFZcKoyKcca","GameEvents",void 0);var e;E("gameEventTarget",new T);!function(E){E[E.NONE=0]="NONE",E[E.INPUT=1]="INPUT",E[E.TOGGLE_INPUT_MANAGER=2]="TOGGLE_INPUT_MANAGER",E[E.RESET_FIELD=3]="RESET_FIELD",E[E.SET_BLOCK_IN_CHAIN=4]="SET_BLOCK_IN_CHAIN",E[E.ADD_SCORE=5]="ADD_SCORE",E[E.MADE_TURN=6]="MADE_TURN",E[E.SET_CELL_EMPTY=7]="SET_CELL_EMPTY",E[E.SET_CELL_MATCH=8]="SET_CELL_MATCH",E[E.BLOCK_RESET_COLOR=9]="BLOCK_RESET_COLOR",E[E.BLOCK_TOGGLE_ACTIVE_BUSTER=10]="BLOCK_TOGGLE_ACTIVE_BUSTER",E[E.BUSTER_ACTIVATE=11]="BUSTER_ACTIVATE"}(e||(e=E("GameEvent",{}))),_._RF.pop()}}}));

System.register("chunks:///_virtual/GameField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./Pool.ts","./Block.ts","./Cell.ts"],(function(e){"use strict";var t,i,n,l,o,r,s,c,a,h,u,f,d,p,_,b,z,C,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Prefab,c=e.Node,a=e.Widget,h=e.Vec2,u=e.math,f=e.UITransform,d=e.Vec3,p=e.instantiate,_=e.Component},function(e){b=e.gameEventTarget,z=e.GameEvent},function(e){C=e.default},function(e){y=e.default},function(e){S=e.default}],execute:function(){var m,k,v,g,w,P,x,E,M,F,I,N,B,L,A,T,G,R,D,O,Y,j;o._RF.push({},"495faUmB/5LJZttepcs6T07","GameField",void 0);var H=r.ccclass,U=r.property,V=r.menu;e("default",(m=H("GameField"),k=V("GameObjects/GameField/GameField"),v=U({type:s,tooltip:"Префаб ячейки"}),g=U({type:c,tooltip:"Родительская нода для ячеек"}),w=U({tooltip:"Размер ячейки"}),P=U({type:s,tooltip:"Префаб блока"}),x=U({type:c,tooltip:"Нода рендера - спрайта поля"}),E=U({tooltip:"Дополнительный размер маски к размеру поля"}),M=U({type:c,tooltip:"Нода маски. Является робительской для блоков"}),F=U({tooltip:"Дополнительный размер маски к размеру поля"}),I=U({tooltip:"Частота срабатывания проверки поля на наличие совпадений"}),m(N=k((L=t((B=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"cellPrefab",L,l(t)),n(t,"cellsNode",A,l(t)),n(t,"cellSize",T,l(t)),n(t,"blockPrefab",G,l(t)),n(t,"renderNode",R,l(t)),n(t,"extraRenderSize",D,l(t)),n(t,"maskNode",O,l(t)),n(t,"extraMaskSize",Y,l(t)),n(t,"noMatchCheckFieldDelay",j,l(t)),t._fieldSizeInCells=void 0,t._maxActiveColors=2,t._startPosition=void 0,t._blockInitY=void 0,t._cells=[],t._blockPool=void 0,t}i(t,e);var o=t.prototype;return o.onEnable=function(){this._eventListener(!0)},o.onDisable=function(){this._eventListener(!1)},o.update=function(){this._checkEmptyCells()},o.init=function(e,t){this.getComponent(a).updateAlignment(),this._fieldSizeInCells=e,this._maxActiveColors=t,this._setFieldSizeAndStartPosition(),this._createCells(),this._createBlockPool(),this._initBlocks(),this._initFieldMatchCheck()},o._eventListener=function(e){var t=e?"on":"off";b[t](z.SET_CELL_EMPTY,this.onSetCellEmpty,this),b[t](z.SET_CELL_MATCH,this.onSetCellNoMatch,this)},o._setFieldSizeAndStartPosition=function(){this._fieldSizeInCells=new h(Math.round(this._fieldSizeInCells.x),Math.round(this._fieldSizeInCells.y));var e=new u.Size(this._fieldSizeInCells.x*this.cellSize.x,this._fieldSizeInCells.y*this.cellSize.y),t=new u.Size(e.width+this.extraMaskSize.x,e.height+this.extraMaskSize.y),i=new u.Size(e.width+this.extraRenderSize.x,e.height+this.extraRenderSize.y),n=this.getComponent(f),l=this.maskNode.getComponent(f),o=this.renderNode.getComponent(f);n.setContentSize(e),l.setContentSize(t),o.setContentSize(i);var r=-e.width/2+this.cellSize.x/2,s=-e.height/2+this.cellSize.y/2;this._startPosition=new h(r,s),this._blockInitY=e.height/2+this.cellSize.y},o._createCells=function(){for(var e=0;e<this._fieldSizeInCells.y;e++){this._cells.push([]);for(var t=0;t<this._fieldSizeInCells.x;t++)this._createCell(e,t)}},o._createCell=function(e,t){var i=this._startPosition.x+this.cellSize.x*t,n=this._startPosition.y+this.cellSize.y*e,l=new d(i,n,this.node.position.z),o=p(this.cellPrefab),r=o.getComponent(S);o.setParent(this.cellsNode),r.init(l,e,t),this._cells[e].push(r)},o._createBlockPool=function(){this._blockPool=new C(this.blockPrefab,new y,4,this.maskNode)},o._initBlocks=function(){var e=this;this._cells.forEach((function(t){t.forEach((function(t){var i=e._blockPool.getFreeActor(!0,!0);e._initBlock(i,t)}))}))},o._initBlock=function(e,t){var i=t.node.position,n=i.x,l=i.y,o=t.row,r=t.col,s=new d(n,this._blockInitY,0),c=new d(n,l,0),a=this._fieldSizeInCells.x*this._fieldSizeInCells.y;e.init(s,c,o,r,this._maxActiveColors,a),t.isEmpty=!1},o._initFieldMatchCheck=function(){var e=this;this.schedule((function(){e._cells.every((function(e){return e.every((function(e){return e.isNoMatch&&!e.isEmpty}))}))&&e._resetBlockColors()}),this.noMatchCheckFieldDelay)},o._resetBlockColors=function(){this.unscheduleAllCallbacks(),b.emit(z.BLOCK_RESET_COLOR),this._initFieldMatchCheck()},o._checkEmptyCells=function(){var e=this,t=this._cells[this._fieldSizeInCells.y-1].filter((function(e){return e.isEmpty}));0!==t.length&&t.forEach((function(t){var i=e._blockPool.getFreeActor(!1,!0);i&&e._initBlock(i,t)}))},o.onSetCellEmpty=function(e,t,i){this._cells[t][i].isEmpty=e},o.onSetCellNoMatch=function(e,t,i){this._cells[t][i].isNoMatch=e},t}(_)).prototype,"cellPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(B.prototype,"cellsNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(B.prototype,"cellSize",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),G=t(B.prototype,"blockPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"renderNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(B.prototype,"extraRenderSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),O=t(B.prototype,"maskNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(B.prototype,"extraMaskSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),j=t(B.prototype,"noMatchCheckFieldDelay",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=B))||N)||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./UiEvents.ts","./GameField.ts","./SceneType.ts"],(function(e){"use strict";var t,i,n,r,o,a,s,l,c,u,h,_,p,f,m,d,y,S,T,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Color,l=e.Node,c=e.Prefab,u=e.CCInteger,h=e.instantiate,_=e.Vec3,p=e.Component,f=e.Vec2,m=e.director},function(e){d=e.gameEventTarget,y=e.GameEvent},function(e){S=e.uiEventTarget,T=e.UiEvent},function(e){g=e.default},function(e){b=e.SceneType}],execute:function(){var v,C,E,R,F,O,k,w,A,N,L,M,P,G,z,I,x,B,D,U;o._RF.push({},"d84976PnMdLcb6VfrNnAyNy","GameManager",void 0);var W,V,Y=a.ccclass,j=a.property,H=a.menu;!function(e){e.None="",e.Win="Победа",e.Lose="Поражение"}(W||(W={})),function(e){e.None="",e.ScoreTargetReached="Цель достигнута",e.RanOutOfTurns="Закончились ходы",e.MaxResetFieldTimesReached=""}(V||(V={}));var K={win:new s(77,236,77,255),lose:new s(236,77,77,255)};e("default",(v=Y("GameManager"),C=H("Managers/GameManager"),E=j({type:l,tooltip:"Корневая родительская нода"}),R=j({type:c,tooltip:"Префаб поля"}),F=j({tooltip:"Размер поля в ячейках"}),O=j({type:u,min:2,tooltip:"Максимальное количество используемых цветов для блоков"}),k=j({type:u,min:1,tooltip:"Максимальное количество возможных сбросов поля до проигрыша"}),w=j({type:u,min:1,tooltip:"Количество ходов игрока"}),A=j({type:u,min:1,tooltip:"Количество очков за один разрушенный блок"}),N=j({type:u,min:100,tooltip:"Количество очков, необходимых для победы игрока"}),v(L=C((P=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"rootNode",P,r(t)),n(t,"gameFieldPrefab",G,r(t)),n(t,"fieldSizeInCells",z,r(t)),n(t,"maxActiveColors",I,r(t)),n(t,"maxResetFieldTimes",x,r(t)),n(t,"playerTurns",B,r(t)),n(t,"playerScoreForBlock",D,r(t)),n(t,"playerTargetScore",U,r(t)),t._playerScore=0,t._blockChains={},t._resetFieldTimes=0,t._gameOverState=W.None,t._gameOverReason=V.None,t}i(t,e);var o=t.prototype;return o.onEnable=function(){this._eventListener(!0)},o.onDisable=function(){this._eventListener(!1)},o.start=function(){this._createGameField(),S.emit(T.SET_TURNS,this.playerTurns)},o.update=function(){this._checkChains()},o._eventListener=function(e){var t=e?"on":"off";d[t](y.RESET_FIELD,this.onResetField,this),d[t](y.SET_BLOCK_IN_CHAIN,this.onSetBlockInChain,this),d[t](y.ADD_SCORE,this.onAddScore,this),d[t](y.MADE_TURN,this.onMadeTurn,this)},o._createGameField=function(){var e=h(this.gameFieldPrefab);e.setParent(this.rootNode),e.setPosition(_.ZERO),e.getComponent(g).init(this.fieldSizeInCells,this.maxActiveColors)},o._checkChains=function(){var e=this;Object.keys(this._blockChains).forEach((function(t){if(0!==e._blockChains[t].length&&e._blockChains[t].every((function(e){return!e.node.active}))){var i=e._calcScore(e._blockChains[t].length),n=e._blockChains[t][0].node.worldPosition;e._sendFlyAwayText(n,i),e._updatePlayerScore(i),e._madeTurn(),e._blockChains[t]=[]}}))},o._updatePlayerScore=function(e){this._playerScore+=e;var t=this._playerScore/this.playerTargetScore*100;S.emit(T.SET_PROGRESS,t),S.emit(T.SET_PLAYER_SCORE,this._playerScore),this._playerScore>=this.playerTargetScore&&this._gameOver(W.Win,V.ScoreTargetReached)},o._calcScore=function(e){return e*this.playerScoreForBlock},o._sendFlyAwayText=function(e,t){var i="+"+t;S.emit(T.FLY_AWAY_TEXT,e,i)},o._madeTurn=function(){this.playerTurns--,S.emit(T.SET_TURNS,this.playerTurns),this.playerTurns<=0&&this._gameOver(W.Lose,V.RanOutOfTurns)},o._resetField=function(){this._resetFieldTimes++,this._resetFieldTimes>=this.maxResetFieldTimes&&this._gameOver(W.Lose,V.MaxResetFieldTimesReached)},o._setBlockInChain=function(e,t){var i=""+e.row+e.col;this._blockChains[i]||(this._blockChains[i]=[]),this._blockChains[i].push(t)},o._gameOver=function(e,t){if(this._gameOverState===W.None){this._gameOverState=e,this._gameOverReason=t;var i=this._gameOverState===W.Win?K.win:K.lose;d.emit(y.TOGGLE_INPUT_MANAGER,!1),S.emit(T.SET_FULL_SCREEN_MESSAGE,this._gameOverState,this._gameOverReason,i,(function(){m.loadScene(b.MainMenu)}))}},o.onResetField=function(){this._resetField()},o.onSetBlockInChain=function(e,t){this._setBlockInChain(e,t)},o.onAddScore=function(e,t){var i=this._calcScore(t);this._sendFlyAwayText(e,i),this._updatePlayerScore(i)},o.onMadeTurn=function(){this._madeTurn()},t}(p)).prototype,"rootNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"gameFieldPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"fieldSizeInCells",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),I=t(M.prototype,"maxActiveColors",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),x=t(M.prototype,"maxResetFieldTimes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),B=t(M.prototype,"playerTurns",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),D=t(M.prototype,"playerScoreForBlock",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),U=t(M.prototype,"playerTargetScore",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),L=M))||L)||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/IInputCommand.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"e25b3k81WpATLTyFEZwmKze","IInputCommand",void 0);n("default",function(){function n(n){this.node=void 0,this.manager=void 0,this.touches=void 0,this.currentTouch=void 0,this.node=n.node,this.manager=n}var t=n.prototype;return t.onDown=function(n,t){},t.onMove=function(n,t){},t.onUp=function(n,t){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/InputCatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./GameAreaCommandType.ts","./InputDirection.ts","./InputType.ts","./UiAreaCommandType.ts"],(function(t){"use strict";var e,n,i,o,r,a,c,u,s,p,h,l,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,c=t._decorator,u=t.Node,s=t.Component},function(t){p=t.gameEventTarget,h=t.GameEvent},function(t){l=t.default},function(t){d=t.default},function(t){f=t.InputType},function(t){y=t.default}],execute:function(){var m,v,T,C,_,b,E,g,U,I,A;a._RF.push({},"0e2adk9E/pFs4NiF47CBuWR","InputCatcher",void 0);var D=c.ccclass,N=c.property,w=c.menu;t("default",(m=D("InputCatcher"),v=w("Input/InputCatcher"),T=N({type:d}),C=N({type:y,visible:function(){return this._direction===d.UiArea}}),_=N({type:l,visible:function(){return this._direction===d.GameArea}}),b=N({serializable:!0}),m(E=v((e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"uiAreaCommandType",U,o(e)),i(e,"gameAreaCommandType",I,o(e)),i(e,"_direction",A,o(e)),e}n(e,t);var a=e.prototype;return a.onEnable=function(){this._handleEvents(!0)},a.onDisable=function(){this._handleEvents(!1)},a._handleEvents=function(t){var e=t?"on":"off";this.node[e](u.EventType.TOUCH_START,this.onDown,this),this.node[e](u.EventType.TOUCH_MOVE,this.onMove,this),this.node[e](u.EventType.TOUCH_END,this.onUp,this),this.node[e](u.EventType.TOUCH_CANCEL,this.onUp,this)},a.onDown=function(t){p.emit(h.INPUT,f.Down,this.direction,t.touch,this)},a.onMove=function(t){p.emit(h.INPUT,f.Move,this.direction,t.touch,this)},a.onUp=function(t){p.emit(h.INPUT,f.Up,this.direction,t.touch,this)},r(e,[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t}}]),e}(s)).prototype,"direction",[T],Object.getOwnPropertyDescriptor(g.prototype,"direction"),g.prototype),U=e(g.prototype,"uiAreaCommandType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.None}}),I=e(g.prototype,"gameAreaCommandType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.None}}),A=e(g.prototype,"_direction",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.None}}),E=g))||E)||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/InputDirection.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.Enum,n=e.cclegacy}],execute:function(){n._RF.push({},"5ea8c5qFHVLYbRvpvpaJgnS","InputDirection",void 0);e("default",t({None:0,GameArea:1,UiArea:2}));n._RF.pop()}}}));

System.register("chunks:///_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./GameAreaInputCommand.ts","./UiAreaInputCommand.ts","./InputDirection.ts","./InputType.ts"],(function(n){"use strict";var t,e,o,i,a,s,u,c,r,f;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Component},function(n){a=n.gameEventTarget,s=n.GameEvent},function(n){u=n.default},function(n){c=n.default},function(n){r=n.default},function(n){f=n.InputType}],execute:function(){var p;e._RF.push({},"24587tnDrRO+rEIkgzeWCOZ","InputManager",void 0);var l=o.ccclass,h=o.menu;n("default",l("InputManager")(p=h("Managers/InputManager")(p=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._commands={},t._isActive=!0,t}t(e,n);var o=e.prototype;return o.onLoad=function(){a.on(s.INPUT,this.onInput,this),this._commands[r.GameArea]=new u(this),this._commands[r.UiArea]=new c(this)},o.onEnable=function(){this._eventListener(!0)},o.onDisable=function(){this._eventListener(!1)},o._eventListener=function(n){a[n?"on":"off"](s.TOGGLE_INPUT_MANAGER,this.onToggleInputManager,this)},o.onInput=function(n,t,e,o){if(this._isActive){var i=this._commands[t];switch(n){case f.Down:null==i||i.onDown(e,o);break;case f.Move:null==i||i.onMove(e,o);break;case f.Up:null==i||i.onUp(e,o)}}},o.onDown=function(n,t,e){},o.onMove=function(n,t,e){},o.onUp=function(n,t,e){},o.onToggleInputManager=function(n){this._isActive=n},e}(i))||p)||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/InputType.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var t;e("InputType",void 0),n._RF.push({},"4d894PjjQhGU5DKMmv1vedZ","InputType",void 0),function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Move=2]="Move",e[e.Up=3]="Up"}(t||(t=e("InputType",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameEvents.ts","./UiEvents.ts","./BombBuster.ts","./BlockType.ts","./BusterType.ts","./Block.ts","./Cell.ts","./GameField.ts","./BustersManager.ts","./GameManager.ts","./GameAreaInputCommand.ts","./IInputCommand.ts","./UiAreaInputCommand.ts","./GameAreaCommandType.ts","./InputDirection.ts","./InputType.ts","./UiAreaCommandType.ts","./InputCatcher.ts","./InputManager.ts","./SceneManager.ts","./UiManager.ts","./Pool.ts","./SceneType.ts","./BustersBar.ts","./BusterButton.ts","./PauseButton.ts","./StartGameButton.ts","./FlyAwayText.ts","./EffectType.ts","./FullScreenMessage.ts","./PlayerProgressBar.ts","./ScoreAndTurnsBar.ts","./template.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PauseButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneType.ts"],(function(t){"use strict";var e,n,u,o,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,u=t._decorator,o=t.director,c=t.Component},function(t){s=t.SceneType}],execute:function(){var i;n._RF.push({},"b59c850Z2RDbKnxPjEuuwF3","PauseButton",void 0);var r=u.ccclass,a=u.menu;t("default",r("PauseButton")(i=a("Ui/Buttons/PauseButton")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var u=n.prototype;return u._stopGame=function(){o.loadScene(s.MainMenu)},u.onClick=function(){this._stopGame()},n}(c))||i)||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiEvents.ts"],(function(e){"use strict";var r,t,n,s,i,o,a,u,c,p,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,a=e.ProgressBar,u=e.tween,c=e.Component},function(e){p=e.uiEventTarget,l=e.UiEvent}],execute:function(){var g,f,h;i._RF.push({},"376ce3fEupJ/psUb57N1F4a","PlayerProgressBar",void 0);var v=o.ccclass,P=o.property,_=o.menu;e("default",v("PlayerProgressBar")(g=_("Ui/PlayerProgressBar")((h=r((f=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"progressLineTweenDuration",h,s(r)),r._progressBar=void 0,r._tween=void 0,r}t(r,e);var i=r.prototype;return i.onEnable=function(){this._progressBar=this.getComponent(a),this._eventListener(!0)},i.onDisable=function(){this._eventListener(!1)},i._eventListener=function(e){p[e?"on":"off"](l.SET_PROGRESS,this.onSetProgress,this)},i._setProgress=function(e){var r;null==(r=this._tween)||r.stop(),this._tween=u(this._progressBar).to(this.progressLineTweenDuration,{progress:e/100},{easing:"quadOut"}).start()},i.onSetProgress=function(e){this._setProgress(e)},r}(c)).prototype,"progressLineTweenDuration",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),g=f))||g)||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/Pool.ts",["cc"],(function(t){"use strict";var o,e;return{setters:[function(t){o=t.cclegacy,e=t.instantiate}],execute:function(){o._RF.push({},"68e29amlIFASo9dOJnnC9mk","Pool",void 0);t("default",function(){function t(t,o,e,n){this.prefab=void 0,this.parent=void 0,this._component=void 0,this._pool=void 0,this.prefab=t,this.parent=n,this._component=o,this._createPool(e)}var o=t.prototype;return o._createPool=function(t){this._pool=[];for(var o=0;o<t;o++)this._createActor()},o._createActor=function(t){void 0===t&&(t=!1);var o=e(this.prefab);o.parent=this.parent,o.active=t;var n=o.getComponent(this._component.name);return this._pool.push(n),n},o.getFreeActor=function(t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var e=this._pool.find((function(t){return!t.node.active}));return e?(e.node.active=o,e):t?this._createActor(o):null},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneType.ts"],(function(e){"use strict";var n,t,r,c,o,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,c=e.director,o=e.Component},function(e){a=e.SceneType}],execute:function(){var u;t._RF.push({},"cd8566AC4BGmZ4PqGOzR0M6","SceneManager",void 0);var s=r.ccclass,i=(r.property,r.menu);e("default",s("SceneManager")(u=i("Managers/SceneManager")(u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){c.preloadScene(a.Game)},t}(o))||u)||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneType.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var c;e("SceneType",void 0),n._RF.push({},"7b86dnuloxK/rXpzpkQ17ml","SceneType",void 0),function(e){e.Game="Game",e.MainMenu="MainMenu"}(c||(c=e("SceneType",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreAndTurnsBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiEvents.ts"],(function(e){"use strict";var t,n,r,i,a,o,s,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,l=e.Component},function(e){u=e.uiEventTarget,c=e.UiEvent}],execute:function(){var b,p,f,h,L,S,y,v;a._RF.push({},"16876vUgOFNLZSVxwr1oV7a","ScoreAndTurnsBar",void 0);var _=o.ccclass,d=o.property,T=o.menu;e("default",(b=_("ScoreAndTurnsBar"),p=T("Ui/ScoreAndTurnsBar"),f=d({type:s}),h=d({type:s}),b(L=p((y=t((S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"turnsLabel",y,i(t)),r(t,"playerScoreLabel",v,i(t)),t}n(t,e);var a=t.prototype;return a.onEnable=function(){this._eventListener(!0)},a.onDisable=function(){this._eventListener(!1)},a._eventListener=function(e){var t=e?"on":"off";u[t](c.SET_TURNS,this.onSetTurnsLabel,this),u[t](c.SET_PLAYER_SCORE,this.onSetPlayerScoreLabel,this)},a._setTurnsLabel=function(e){this.turnsLabel.string=""+e},a._setPlayerScoreLabel=function(e){var t=this;this.unscheduleAllCallbacks();var n=0,r=+this.playerScoreLabel.string,i=Math.round((e-r)/4);this.schedule((function(){n++,r+=i;var a=4===n?e:r;t.playerScoreLabel.string=""+a}),.1,3)},a.onSetTurnsLabel=function(e){this._setTurnsLabel(e)},a.onSetPlayerScoreLabel=function(e){this._setPlayerScoreLabel(e)},t}(l)).prototype,"turnsLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(S.prototype,"playerScoreLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L)||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/StartGameButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneType.ts"],(function(t){"use strict";var e,n,o,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.director,a=t.Component},function(t){c=t.SceneType}],execute:function(){var u;n._RF.push({},"b55baIUloJNv44xiKSL3f/e","StartGameButton",void 0);var i=o.ccclass,s=(o.property,o.menu);t("default",i("StartGameButton")(u=s("Ui/Buttons/StartGameButton")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o._startGame=function(){r.loadScene(c.Game)},o.onClick=function(){this._startGame()},n}(a))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/template.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,s=t.Component}],execute:function(){n._RF.push({},"bf0ecaHsa5OMZsdzaRshr2b","template",void 0);r.ccclass,r.property,r.menu,t("default",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/UiAreaCommandType.ts",["cc"],(function(t){"use strict";var e,u;return{setters:[function(t){e=t.Enum,u=t.cclegacy}],execute:function(){u._RF.push({},"795786kHdVBgotR2M9365BB","UiAreaCommandType",void 0);t("default",e({None:0,BusterButton:1,PauseButton:2,StartGameButton:3}));u._RF.pop()}}}));

System.register("chunks:///_virtual/UiAreaInputCommand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BusterButton.ts","./PauseButton.ts","./StartGameButton.ts","./InputDirection.ts","./UiAreaCommandType.ts","./InputCatcher.ts","./IInputCommand.ts"],(function(t){"use strict";var n,e,o,u,i,a,c,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.default},function(t){u=t.default},function(t){i=t.default},function(t){a=t.default},function(t){c=t.default},function(t){r=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"86cc9W3ox1AtLb4fll+maKg","UiAreaInputCommand",void 0);t("default",function(t){function e(n){return t.call(this,n)||this}n(e,t);var s=e.prototype;return s.onDown=function(t,n){},s.onMove=function(t,n){},s.onUp=function(t,n){var e=n.node.getComponent(r);if((null==e?void 0:e.direction)===a.UiArea)switch(e.uiAreaCommandType){case c.BusterButton:n.node.getComponent(o).onClick();break;case c.PauseButton:n.node.getComponent(u).onClick();break;case c.StartGameButton:n.node.getComponent(i).onClick()}},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/UiEvents.ts",["cc"],(function(E){"use strict";var S,t;return{setters:[function(E){S=E.cclegacy,t=E.EventTarget}],execute:function(){E("UiEvent",void 0),S._RF.push({},"ad6caOVDRhMRp3aePXAHP0z","UiEvents",void 0);var e;E("uiEventTarget",new t);!function(E){E[E.NONE=0]="NONE",E[E.SET_PROGRESS=1]="SET_PROGRESS",E[E.SET_TURNS=2]="SET_TURNS",E[E.SET_PLAYER_SCORE=3]="SET_PLAYER_SCORE",E[E.SET_FULL_SCREEN_MESSAGE=4]="SET_FULL_SCREEN_MESSAGE",E[E.FLY_AWAY_TEXT=5]="FLY_AWAY_TEXT"}(e||(e=E("UiEvent",{}))),S._RF.pop()}}}));

System.register("chunks:///_virtual/UiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiEvents.ts","./FlyAwayText.ts","./EffectType.ts"],(function(e){"use strict";var t,n,i,r,o,a,f,u,c,l,s,p,y,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,i=e.inheritsLoose,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,f=e.Prefab,u=e.Node,c=e.instantiate,l=e.Component},function(e){s=e.uiEventTarget,p=e.UiEvent},function(e){y=e.default},function(e){h=e.default}],execute:function(){var b,g,E,d,v,T,_,m,w,A,F,U,x,z,P,L,M;o._RF.push({},"0d8bdlOB7VD8r8LZuqhlzBn","UiManager",void 0);var D=a.ccclass,N=a.property,B=a.menu,I=(b=D("UiEffect"),g=N({type:h}),E=N({type:f}),b((T=t((v=function(){n(this,"effectType",T,this),n(this,"effectPrefab",_,this)}).prototype,"effectType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.FlyAwayText}}),_=t(v.prototype,"effectPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d);e("default",(m=D("UiManager"),w=B("Managers/UiManager"),A=N({type:u,tooltip:"Корневая родительская нода"}),F=N({type:[f]}),U=N({type:[I]}),m(x=w((P=t((z=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"rootNode",P,r(t)),n(t,"uiElements",L,r(t)),n(t,"uiEffects",M,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){this._createUiElements(),this._eventListener(!0)},o.onDisable=function(){this._eventListener(!1)},o._eventListener=function(e){s[e?"on":"off"](p.FLY_AWAY_TEXT,this.onInitFlyAwayText,this)},o._createUiElements=function(){var e=this;this.uiElements.forEach((function(t){c(t).setParent(e.rootNode)}))},o._initFlyAwayText=function(e,t){var n=this._getEffect(h.FlyAwayText),i=c(n);i.setParent(this.rootNode),i.getComponent(y).init(e,t)},o._getEffect=function(e){return this.uiEffects.find((function(t){return t.effectType===e})).effectPrefab},o.onInitFlyAwayText=function(e,t){this._initFlyAwayText(e,t)},t}(l)).prototype,"rootNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"uiElements",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(z.prototype,"uiEffects",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=z))||x)||x));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});